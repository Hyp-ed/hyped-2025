#|| goto :windows_code

    echo "Building main workspace"
    if cargo build --quiet; then 
        echo "Successfully built main workspace"
    else
        echo "Failed to build main workspace"
        exit 1
    fi
    cd boards || exit 1
    for dir_name in *; do
        if [ -d "$dir_name" ]; then
            cd "$dir_name"
            if cargo build --quiet; then 
                echo "Successfully built $dir_name"
            else
                echo "Failed to build $dir_name"
            fi 
            cd ..
        else
            echo "Skipping $dir_name as it is not a directory"
        fi
    done


#windows_code below
exit
:windows_code
    echo Building main workspace
    cargo build --quiet
    if %ERRORLEVEL% NEQ 0 (
        echo Failed to build main workspace
        exit /b 1
    ) else (
        echo Successfully built main workspace
    )
    
    cd boards || exit /b 1
    for /d %%d in (*) do (
        if exist "%%d" (
            cd "%%d"
            cargo build --quiet
            if %ERRORLEVEL% NEQ 0 (
                echo Failed to build %%d
            ) else (
                echo Successfully built %%d
            )
            cd ..
        ) else (
            echo Skipping %%d as it is not a directory
        )
    )
